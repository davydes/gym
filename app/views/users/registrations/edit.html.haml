%div.login
  %h3.authTitle Edit #{resource_name.to_s.humanize}

  = form_for(resource, as: resource_name, url: registration_path(resource_name), html: { data: {model: resource_name}, method: :put }) do |f|
    = devise_error_messages!
    %div.form-group
      %div.input-group
        %span.input-group-addon
          %span.glyphicon.glyphicon-envelope
        = f.email_field :email, autofocus: true, class: 'form-control', placeholder: "e-mail"
      %span.help-block
        - if devise_mapping.confirmable? && resource.pending_reconfirmation?
          Currently waiting confirmation for: #{resource.unconfirmed_email}

    %div.form-group
      %div.input-group
        %span.input-group-addon
          %span.glyphicon.glyphicon-user
        = f.text_field :name, autofocus: true, class: 'form-control', placeholder: "name"
      %span.help-block

    %div.form-group
      %div.input-group
        %span.input-group-addon
          %span.glyphicon.glyphicon-lock
        = f.password_field :password, autocomplete: "off", class: 'form-control', placeholder: "password"
      %span.help-block

    %div.form-group
      %div.input-group
        %span.input-group-addon
          %span.glyphicon.glyphicon-lock
        = f.password_field :password_confirmation, autocomplete: "off", class: 'form-control', placeholder: "password confirmation"
      %span.help-block
    %div.form-group
      = button_tag(type: 'submit', class: "btn btn-lg btn-primary btn-block") do
        %i.fa.fa-sign-in
        Update

  = button_to "Cancel my account", registration_path(resource_name), class: "btn btn-lg btn-danger btn-block",  data: { confirm: "Are you sure?" }, method: :delete

  = render "users/shared/links"

- if resource.errors.any?
  :coffeescript
    $ ->
      $("form[data-model=#{resource_name}]").renderFormErrors(#{resource.errors.to_json.html_safe});